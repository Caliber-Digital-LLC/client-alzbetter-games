<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <title>Lucky Slots - AlzBetter Games</title>
    <link rel="stylesheet" href="../shared/casino-theme.css">
    <link rel="stylesheet" href="../shared/casino-components.css">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="../shared/help-modal.css">
</head>
<body>
    <div class="game-container">
        <!-- Header -->
        <header class="header">
            <h1 class="header-title"><img src="/icons/slots.svg" class="title-icon" alt=""> Lucky Slots</h1>
            <div class="header-actions">
                <button class="icon-btn" id="soundBtn" aria-label="Toggle sound">
                    <svg class="sound-on-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"/>
                        <path d="M15.54 8.46a5 5 0 0 1 0 7.07"/>
                        <path d="M19.07 4.93a10 10 0 0 1 0 14.14"/>
                    </svg>
                    <svg class="sound-off-icon hidden" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"/>
                        <line x1="22" y1="9" x2="16" y2="15"/>
                        <line x1="16" y1="9" x2="22" y2="15"/>
                    </svg>
                </button>
                <button class="icon-btn" id="helpBtn" aria-label="Help">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="12" cy="12" r="10"/>
                        <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/>
                        <path d="M12 17h.01"/>
                    </svg>
                </button>
            </div>
        </header>

        <!-- Stats Bar -->
        <div class="stats-bar">
            <div class="stat-item">
                <span class="stat-label">Credits</span>
                <span class="stat-value" id="credits">100</span>
            </div>
            <div class="stat-item">
                <span class="stat-label">Win</span>
                <span class="stat-value win-amount" id="winAmount">0</span>
            </div>
        </div>

        <!-- Status Message -->
        <div class="instruction" id="statusMessage" role="status" aria-live="polite">
            Tap Spin to play
        </div>

        <!-- Main Game Area -->
        <main class="game-area">
            <div class="slot-machine-wrapper">
                <div class="slot-cabinet">
                    <!-- Slot Reels -->
                    <div class="reels-container" id="reelsContainer">
                        <div class="reel" id="reel1">
                            <div class="reel-strip">
                                <!-- Symbols populated by JS -->
                            </div>
                            <div class="reel-highlight"></div>
                            <div class="reel-mask top"></div>
                            <div class="reel-mask bottom"></div>
                        </div>
                        <div class="reel" id="reel2">
                            <div class="reel-strip">
                                <!-- Symbols populated by JS -->
                            </div>
                            <div class="reel-highlight"></div>
                            <div class="reel-mask top"></div>
                            <div class="reel-mask bottom"></div>
                        </div>
                        <div class="reel" id="reel3">
                            <div class="reel-strip">
                                <!-- Symbols populated by JS -->
                            </div>
                            <div class="reel-highlight"></div>
                            <div class="reel-mask top"></div>
                            <div class="reel-mask bottom"></div>
                        </div>
                    </div>

                    <!-- Payline Indicator -->
                    <div class="payline-indicator">
                        <span class="payline-dot"></span>
                        <span class="payline-text">Middle Row Pays</span>
                        <span class="payline-dot"></span>
                    </div>
                </div>

                <!-- Lever -->
                <button class="lever" id="leverBtn" aria-label="Pull lever to spin">
                    <div class="lever-track"></div>
                    <div class="lever-arm" id="leverArm">
                        <div class="lever-shaft"></div>
                        <div class="lever-ball">
                            <div class="lever-shine"></div>
                        </div>
                    </div>
                    <div class="lever-base"></div>
                </button>
            </div>

            <!-- Controls below cabinet -->
            <div class="slot-controls">
                <div class="bet-selector">
                    <span class="bet-label">Bet</span>
                    <div class="bet-options" id="betOptions">
                        <button class="bet-option active" data-bet="1">1</button>
                        <button class="bet-option" data-bet="3">3</button>
                        <button class="bet-option" data-bet="5">5</button>
                    </div>
                </div>
                
                <button class="btn btn-primary btn-lg spin-btn" id="spinBtn">
                    <svg class="spin-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <polygon points="5 3 19 12 5 21 5 3"/>
                    </svg>
                    <span>SPIN</span>
                </button>
            </div>
        </main>

        <!-- Game Over Overlay -->
        <div class="gameover-overlay hidden" id="gameOverOverlay">
            <div class="gameover-content">
                <div class="gameover-icon">ðŸŽ°</div>
                <h2 class="gameover-title">Thanks for Playing!</h2>
                <p class="gameover-message">You've run out of credits.</p>
                <button class="btn btn-primary btn-lg" id="resetBtn">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" width="24" height="24">
                        <path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"/>
                        <path d="M21 3v5h-5"/>
                        <path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"/>
                        <path d="M3 21v-5h5"/>
                    </svg>
                    PLAY AGAIN
                </button>
            </div>
        </div>

        <!-- Jackpot Celebration -->
        <div class="jackpot-overlay hidden" id="jackpotOverlay">
            <div class="jackpot-content">
                <div class="jackpot-title">ðŸŽ° JACKPOT! ðŸŽ°</div>
                <div class="jackpot-amount" id="jackpotAmount">+50 Credits!</div>
                <div class="jackpot-hint">Tap anywhere to continue</div>
            </div>
            <div class="confetti-container" id="confettiContainer"></div>
        </div>

        <!-- Win Celebration -->
        <div class="win-celebration hidden" id="winCelebration"></div>
    </div>

    <!-- Help Modal -->
    <div class="modal-overlay" id="helpModal">
        <div class="modal">
            <div class="modal-header">
                <h2 class="modal-title">Payouts</h2>
                <button class="modal-close" id="closeHelpBtn" aria-label="Close">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <line x1="18" y1="6" x2="6" y2="18"/>
                        <line x1="6" y1="6" x2="18" y2="18"/>
                    </svg>
                </button>
            </div>
            <div class="modal-body">
                <p class="payout-info">Multiply by your bet (1x, 3x, or 5x)</p>
                
                <div class="paytable">
                    <div class="paytable-row jackpot-row">
                        <span class="paytable-hand">ðŸŽ° Three 7s <span class="jackpot-tag">JACKPOT!</span></span>
                        <span class="paytable-payout">50x</span>
                    </div>
                    <div class="paytable-row">
                        <span class="paytable-hand">Three of a kind (middle)</span>
                        <span class="paytable-payout">10x</span>
                    </div>
                    <div class="paytable-row">
                        <span class="paytable-hand">Three of a kind (top/bottom)</span>
                        <span class="paytable-payout">5x</span>
                    </div>
                    <div class="paytable-row">
                        <span class="paytable-hand">Two adjacent matching</span>
                        <span class="paytable-payout">2x</span>
                    </div>
                    <div class="paytable-row">
                        <span class="paytable-hand">Two matching (edges)</span>
                        <span class="paytable-payout">1x</span>
                    </div>
                </div>

                <div class="rules-section">
                    <h3>How to Play</h3>
                    <ul>
                        <li>Choose your bet amount (1, 3, or 5 credits)</li>
                        <li>Tap SPIN or pull the lever to spin the reels</li>
                        <li>Match symbols on the middle row to win!</li>
                        <li>Three 7s triggers the JACKPOT!</li>
                    </ul>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary" id="gotItBtn">Got It!</button>
            </div>
        </div>
    </div>

    <script src="../shared/casino-utils.js"></script>
    <script src="slots.js"></script>
</body>
</html>
