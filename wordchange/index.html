<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="theme-color" content="#2d3748">
    
    <title>Word Change</title>
    
    <!-- 
    ============================================================================
    TUNING SECTION
    ============================================================================
    
    GAME CONFIGURATION (in game.js CONFIG object):
    - POINTS_PER_WORD: 100          - Base points per correct answer
    - BONUS_TIME_THRESHOLD: 10      - Seconds remaining to earn time bonus
    - BONUS_POINTS: 50              - Bonus points for quick answers
    - DEFAULT_TIMER_SECONDS: 60     - Countdown timer duration
    - INITIAL_HINTS: 5              - Starting hint count
    - INITIAL_REVEALS: 3            - Starting reveal count  
    - INITIAL_REROLLS: 5            - Starting reroll/skip count
    - POWERUP_REPLENISH_EVERY: 5    - Words completed to earn +1 powerup
    
    WORD CATEGORIES (in words.js CATEGORIES object):
    Each category has:
    - name: Display name
    - description: Shown in category picker
    - words: Array of seed words
    
    STYLING (in styles.css :root section):
    - --tile-size: clamp(48px, 12vw, 80px)    - Word tile size
    - --tile-font-size: clamp(24px, 6vw, 36px) - Tile letter size
    - --key-height: clamp(40px, 10vw, 56px)    - Keyboard key height
    - --key-font-size: clamp(16px, 4vw, 22px)  - Key letter size
    - --powerup-size: clamp(44px, 11vw, 60px)  - Powerup button size
    - --spacing-sm/md/lg/xl: Various spacing values
    
    COLOR VARIABLES:
    - --bg-primary: #2d3748       - Main background
    - --bg-secondary: #4a5568     - Secondary background
    - --text-primary: #f7fafc     - Main text color
    - --text-secondary: #a0aec0   - Muted text
    - --accent-primary: #4299e1   - Blue accent
    - --accent-success: #48bb78   - Green for success
    - --accent-warning: #ed8936   - Orange for warnings
    - --accent-hint: #9f7aea      - Purple for hints
    
    ============================================================================
    -->
    
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="../shared/help-modal.css">
</head>
<body>
    <!-- Reveal Preview (shows briefly when using reveal powerup) -->
    <div id="reveal-preview" class="reveal-preview"></div>
    
    <!-- ===== START SCREEN ===== -->
    <div id="start-screen" class="screen start-screen">
        <div class="start-content">
            <h1 class="game-title">Word Change</h1>
            <p class="game-subtitle">Change one letter to make a new word</p>
            
            <div class="start-buttons">
                <button id="quick-play-btn" class="btn btn-primary btn-large">
                    ‚ñ∂ Quick Play
                </button>
                <button id="choose-category-btn" class="btn btn-secondary">
                    üìö Choose Category
                </button>
                <button id="how-to-play-btn" class="btn btn-outline">
                    ‚ùì How to Play
                </button>
            </div>
        </div>
    </div>
    
    <!-- ===== GAME SCREEN ===== -->
    <div id="game-screen" class="screen game-screen" style="display: none;">
        
        <!-- Header (matching other games pattern) -->
        <header class="header">
            <h1 class="header-title"><img src="/icons/wordchange.svg" class="title-icon" alt=""> Word Change</h1>
            <div class="header-actions">
                <button id="soundBtn" class="icon-btn" aria-label="Toggle sound">
                    <svg id="icon-sound-on" class="sound-on-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"/>
                        <path d="M15.54 8.46a5 5 0 0 1 0 7.07"/>
                        <path d="M19.07 4.93a10 10 0 0 1 0 14.14"/>
                    </svg>
                    <svg id="icon-sound-off" class="sound-off-icon hidden" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"/>
                        <line x1="22" y1="9" x2="16" y2="15"/>
                        <line x1="16" y1="9" x2="22" y2="15"/>
                    </svg>
                </button>
                <button id="helpBtn" class="icon-btn" aria-label="Help">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="12" cy="12" r="10"/>
                        <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/>
                        <path d="M12 17h.01"/>
                    </svg>
                </button>
                <button id="settings-btn" class="icon-btn" aria-label="Settings">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="12" cy="12" r="3"/>
                        <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/>
                    </svg>
                </button>
                <button id="menu-btn" class="icon-btn" aria-label="Menu">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/>
                        <polyline points="9 22 9 12 15 12 15 22"/>
                    </svg>
                </button>
            </div>
        </header>

        <!-- Stats Bar -->
        <div class="stats-bar">
            <div class="stat-item">
                <span class="stat-label">Score</span>
                <span id="score-value" class="stat-value">0</span>
            </div>
            <div class="stat-item">
                <span class="stat-label">Words</span>
                <span id="words-value" class="stat-value">0</span>
            </div>
            <div id="timer-stat" class="stat-item" style="display: none;">
                <span class="stat-label">Time</span>
                <span id="timer-value" class="stat-value">1:00</span>
            </div>
        </div>
        
        <!-- Category Badge -->
        <div class="category-row">
            <span id="category-badge" class="category-badge">Easy 3-Letter</span>
        </div>
        
        <!-- Word Area -->
        <main class="word-area">
            <p id="instruction-text" class="instruction-text">
                Tap a letter, then tap a tile to replace
            </p>
            
            <div id="word-row" class="word-row">
                <!-- Word tiles rendered dynamically -->
            </div>
        </main>
        
        <!-- Powerups -->
        <div class="powerup-row">
            <button id="hint-btn" class="powerup-btn" aria-label="Hint">
                <span class="powerup-icon">üí°</span>
                <span id="hint-count" class="powerup-count">5</span>
                <span class="powerup-label">Hint</span>
            </button>
            <button id="reveal-btn" class="powerup-btn" aria-label="Reveal">
                <span class="powerup-icon">üëÅÔ∏è</span>
                <span id="reveal-count" class="powerup-count">3</span>
                <span class="powerup-label">Reveal</span>
            </button>
            <button id="reroll-btn" class="powerup-btn" aria-label="Skip">
                <span class="powerup-icon">üîÑ</span>
                <span id="reroll-count" class="powerup-count">5</span>
                <span class="powerup-label">Skip</span>
            </button>
        </div>
        
        <!-- Keyboard -->
        <div id="keyboard" class="keyboard">
            <!-- Keyboard rows rendered dynamically -->
        </div>
    </div>
    
    <!-- ===== SETTINGS MODAL ===== -->
    <div id="settings-modal" class="modal hidden">
        <div class="modal-content">
            <button id="close-settings" class="modal-close" aria-label="Close">&times;</button>
            <h2>Settings</h2>
            
            <div class="settings-list">
                <div class="setting-item">
                    <span class="setting-label">Timer Mode</span>
                    <button id="toggle-timer" class="toggle-btn">
                        <span class="toggle-track"></span>
                    </button>
                </div>
                
                <div class="setting-item">
                    <span class="setting-label">Sound Effects</span>
                    <button id="toggle-sound" class="toggle-btn active">
                        <span class="toggle-track"></span>
                    </button>
                </div>
                
                <div class="setting-item setting-volume">
                    <span class="setting-label">Volume</span>
                    <input type="range" id="volume-slider" class="volume-slider" min="0" max="100" value="60">
                </div>
                
                <div class="setting-item">
                    <span class="setting-label">Tap Mode (vs Drag)</span>
                    <button id="toggle-tap" class="toggle-btn active">
                        <span class="toggle-track"></span>
                    </button>
                </div>
                
                <div class="setting-item">
                    <span class="setting-label">Reduce Motion</span>
                    <button id="toggle-motion" class="toggle-btn">
                        <span class="toggle-track"></span>
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- ===== HELP MODAL ===== -->
    <div id="help-modal" class="modal hidden">
        <div class="modal-content modal-help">
            <button id="close-help" class="modal-close" aria-label="Close">&times;</button>
            <h2>How to Play</h2>
            
            <div class="help-pages">
                <!-- Page 1 -->
                <div class="help-page active">
                    <div class="help-illustration">
                        <div class="demo-word">
                            <span class="demo-tile">C</span>
                            <span class="demo-tile highlight">A</span>
                            <span class="demo-tile">T</span>
                        </div>
                        <div class="demo-arrow">‚Üì</div>
                        <div class="demo-word">
                            <span class="demo-tile">C</span>
                            <span class="demo-tile success">O</span>
                            <span class="demo-tile">T</span>
                        </div>
                    </div>
                    <p class="help-text">
                        <strong>Change one letter</strong> to form a new word.
                        <br><br>
                        In this example, changing <strong>A</strong> to <strong>O</strong> 
                        turns CAT into COT.
                    </p>
                </div>
                
                <!-- Page 2 -->
                <div class="help-page">
                    <div class="help-illustration">
                        <div class="demo-input">
                            <span class="demo-key selected">O</span>
                            <span class="demo-plus">+</span>
                            <span class="demo-tile target">A</span>
                        </div>
                    </div>
                    <p class="help-text">
                        <strong>Tap mode:</strong> Tap a letter on the keyboard, 
                        then tap the tile you want to replace.
                        <br><br>
                        <strong>Drag mode:</strong> Drag a letter from the keyboard 
                        and drop it on a tile.
                    </p>
                </div>
                
                <!-- Page 3 -->
                <div class="help-page">
                    <div class="help-illustration">
                        <div class="demo-powerups">
                            <div class="demo-powerup">üí°<br><small>Hint</small></div>
                            <div class="demo-powerup">üëÅÔ∏è<br><small>Reveal</small></div>
                            <div class="demo-powerup">üîÑ<br><small>Skip</small></div>
                        </div>
                    </div>
                    <p class="help-text">
                        <strong>Powerups help when you're stuck:</strong>
                        <br><br>
                        <strong>üí° Hint</strong> - Highlights the position to change
                        <br>
                        <strong>üëÅÔ∏è Reveal</strong> - Shows one possible answer briefly
                        <br>
                        <strong>üîÑ Skip</strong> - Skip to a new word
                    </p>
                </div>
            </div>
            
            <div class="help-nav">
                <button id="help-prev" class="btn btn-outline" disabled>Back</button>
                <div class="page-dots">
                    <span class="page-dot active"></span>
                    <span class="page-dot"></span>
                    <span class="page-dot"></span>
                </div>
                <button id="help-next" class="btn btn-primary">Next</button>
            </div>
        </div>
    </div>
    
    <!-- ===== CATEGORY MODAL ===== -->
    <div id="category-modal" class="modal hidden">
        <div class="modal-content">
            <button id="close-category" class="modal-close" aria-label="Close">‚úï</button>
            <h2 class="modal-title">Choose Category</h2>
            
            <div class="category-grid">
                <button class="category-btn selected" data-category="easy3">
                    <span class="category-icon">üî§</span>
                    <span class="category-name">Easy 3-Letter</span>
                    <span class="category-desc">Short words for beginners</span>
                </button>
                
                <button class="category-btn" data-category="easy4">
                    <span class="category-icon">üìù</span>
                    <span class="category-name">Easy 4-Letter</span>
                    <span class="category-desc">Common 4-letter words</span>
                </button>
                
                <button class="category-btn" data-category="animals">
                    <span class="category-icon">üêæ</span>
                    <span class="category-name">Animals</span>
                    <span class="category-desc">Pets and wildlife</span>
                </button>
                
                <button class="category-btn" data-category="food">
                    <span class="category-icon">üçé</span>
                    <span class="category-name">Food</span>
                    <span class="category-desc">Kitchen and meals</span>
                </button>
                
                <button class="category-btn" data-category="veterans">
                    <span class="category-icon">‚≠ê</span>
                    <span class="category-name">Veterans</span>
                    <span class="category-desc">Military and service</span>
                </button>
                
                <button class="category-btn" data-category="general">
                    <span class="category-icon">üìö</span>
                    <span class="category-name">General</span>
                    <span class="category-desc">Mixed vocabulary</span>
                </button>
            </div>
            
            <button id="start-category-btn" class="btn btn-primary btn-large">
                Start Game
            </button>
        </div>
    </div>
    
    <!-- Scripts -->
    <script src="words.js"></script>
    <script src="game.js"></script>
</body>
</html>
